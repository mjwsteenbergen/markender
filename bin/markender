#!/usr/bin/env node

var markender = require('../')
var program = require('commander')
const path = require('path');

program.version(require('../package.json').version)
  .usage('[options] <file>')
  .option('<file>', 'Path of the markdown file to convert')
  .option('--css [cssPath]', 'Css template')
  .parse(process.argv)

if (program.args.length === 0) program.help()

// program.out = program.out || program.args[0].replace(/\.m(ark)?d(own)?/gi, '') + '.pdf'
// opts.cwd = opts.cwd ? path.resolve(opts.cwd) : process.cwd()

var opts = {
  cwd: program.cwd,
  file: program.args[0]
}

console.log(program.css);
opts.cwd = opts.cwd ? path.resolve(opts.cwd) : process.cwd()
opts.file = path.resolve(opts.cwd, opts.file);

markender(opts)
// .concat.from(program.args).to(program.out, function (err) {
//   if (err) throw err
// })